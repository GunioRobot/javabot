<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

   <bean id="configDao" class="javabot.dao.impl.ConfigHibernateDao">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <bean id="factoidDao" class="javabot.dao.impl.FactoidDaoHibernate">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <bean id="changeDao" class="javabot.dao.impl.ChangeDaoHibernate">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <bean id="seenDao" class="javabot.dao.impl.SeenDaoHibernate">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <bean id="logDao" class="javabot.dao.impl.LogsDaoHibernate">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <bean id="channelDao" class="javabot.dao.impl.ChannelDaoHibernate">
        <property name="sessionFactory" ref="sessionFactory"/>
        <property name="configDao" ref="configDao"/>
    </bean>

    <bean id="karmaDao" class="javabot.dao.impl.KarmaDaoHibernate">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <bean id="adminDao" class="javabot.dao.impl.AdminDaoHibernate">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>
    <bean id="dataSource" class="org.unitils.database.UnitilsDataSource" />

    <!--<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="org.hsqldb.Driver"/>
        <property name="url" value="jdbc:hsqldb:javabot-test"/>
        <property name="username" value="sa"/>
        <property name="password" value=""/>
    </bean>
-->


    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="annotatedClasses">
              <list>
                <value>javabot.model.Factoid</value>
                <value>javabot.model.Change</value>
                <value>javabot.model.Config</value>
                <value>javabot.model.Seen</value>
                <value>javabot.model.Logs</value>
                <value>javabot.model.Channel</value>
                <value>javabot.model.Karma</value>
                <value>javabot.model.Admin</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <value>
                hibernate.dialect=org.hibernate.dialect.MySQLDialect
                hibernate.show_sql=true
                use_outer_join=true
                <!--<prop key="hibernate.current_session_context_class">thread</prop>
                <prop key="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</prop>-->

                hibernate.bytecode.use_reflection_optimizer=true
                hibernate.cglib.use_reflection_optimizer=true
                hibernate.transaction.flush_before_completion=true
                hibernate.current_session_context_class=thread

                hibernate.connection.release_mode=after_transaction
                hibernate.transaction.auto_close_session=true

            </value>
        </property>

        <property name="schemaUpdate">
                  <value>true</value>
              </property>
        
    </bean>


    

</beans>
